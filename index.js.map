{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const markupCardGallery = array => \n        array.map(\n        ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => `\n        <li class=\"card\">\n        \n        <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" class=\"image\" height=\"152px\" width=\"360px\" alt=\"${tags}\" />\n        </a>\n        \n        <div class=\"card-description-wrapper\">\n        <div class=\"card-description-item\"> \n                <p class=\"card-description-title\">Likes </p>\n                <p class=\"card-description-title-value\">${likes} </p>\n        </div>\n        <div class=\"card-description-item\"> \n                <p class=\"card-description-title\">Views </p>\n                <p class=\"card-description-title-value\">${views} </p>\n        </div>\n        <div class=\"card-description-item\"> \n                <p class=\"card-description-title\">Comments </p>\n                <p class=\"card-description-title-value\">${comments} </p>\n        </div>\n        <div class=\"card-description-item\"> \n                <p class=\"card-description-title\">Downloads</p>\n                <p class=\"card-description-title-value\">${downloads} </p>\n        </div>\n        </div>\n        </li>\n        `\n        );","import axios from \"axios\";\nconst API_KEY = '46982769-551c832606b75e5005f83cf77';\nconst BASE_URL = 'https://pixabay.com/api/';\n        \nexport const backendData = async (text, perPage, page) => {\nconst options = new URLSearchParams({\n    key: API_KEY,\n    q: text,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n});\nreturn await axios.get(`${BASE_URL}?${options}`).then(response => response.data);\n}","import {markupCardGallery} from \"./js/render-functions\";\nimport { backendData } from \"./js/pixabay-api\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector(\"ul.gallery\");\nconst loader = () => document.querySelector(\"span\").classList.toggle(\"loader\");\nlet searchText = \"\";\nconst showMore = document.querySelector('.show-more');\nconst perPage = 15;\nlet pageCount;\nlet imagesShown;\nlet currentItemCounter;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    caption: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\nconst iziWarning = () => iziToast.show({\n    message: \"Input is empty!\",\n    position: \"topRight\",\n    icon: 'ico-warning',\n    backgroundColor: \"lavender\",\n    messageSize: \"16\",\n    messageColor: \"grey\",\n    theme: \"dark\",\n    maxWidth: \"432px\",\n});\nconst iziError = () => iziToast.show({\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    position: \"topRight\",\n    backgroundColor: \"#EF4040\",\n    messageSize: \"16\",\n    messageColor: \"#fff\",\n    theme: \"dark\",\n    maxWidth: \"350px\",\n    icon: \"ico-error\",\n});\n\nconst iziInfo = () => iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: \"topRight\",\n    messageSize: \"16\",\n    messageColor: \"grey\",\n    theme: \"dark\",\n    maxWidth: \"350px\",\n    backgroundColor: \"lavender\",\n\n});\n\nconst handleForm = async (event) => {\nevent.preventDefault();\npageCount = 1;\nimagesShown = perPage;\nshowMore.classList.add(\"hidden\");\n    searchText = form.elements.searchText.value.trim();\nif (!searchText) return iziWarning(); \n    gallery.innerHTML = \"\";\n    loader();\n\ntry {\n    const data = await backendData(searchText, perPage, pageCount);\n    if (!data.hits.length) return iziError();\n\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markupCardGallery(data.hits).join(\"\"));\n    lightbox.refresh();  \n    if (data.totalHits >= imagesShown) showMore.classList.remove(\"hidden\");\n}   catch(error) {\n    console.error('Error handling form submission:', error);\n    iziToastError(\"An error occurred while fetching data. Please try again later.\");\n}\n    finally {\n        loader();\n        form.reset();\n    }\n}\n\nconst showMoreImages = async() => {\n    currentItemCounter = gallery.childElementCount;\n    pageCount++;\n    imagesShown = perPage * pageCount;\n    loader();\n    showMore.classList.add(\"hidden\");\n    try {\n        const updateData = await backendData(searchText, perPage, pageCount);\n        gallery.insertAdjacentHTML(\"beforeend\", markupCardGallery(updateData.hits).join(\"\"));\n        lightbox.refresh();\n        scrollToNewImages();\n        if (updateData.totalHits > imagesShown) showMore.classList.remove(\"hidden\");\n    else iziInfo();\n    }\n    catch (e) {\n        console.log(e);\n        iziToastError(\"An error occurred while loading more images. Please try again later.\");\n    }\n    finally { loader(); }\n};\n\nconst scrollToNewImages = () => {\n    const firstNewItem = gallery.children[currentItemCounter];\n    firstNewItem.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start'\n    });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    showMore.classList.add(\"hidden\");\n});\n\nform.addEventListener('submit', handleForm);\nshowMore.addEventListener('click', showMoreImages);"],"names":["markupCardGallery","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","backendData","text","perPage","page","options","axios","response","form","gallery","loader","searchText","showMore","pageCount","imagesShown","currentItemCounter","lightbox","SimpleLightbox","iziWarning","iziToast","iziError","iziInfo","handleForm","event","data","error","showMoreImages","updateData","scrollToNewImages","e"],"mappings":"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"}